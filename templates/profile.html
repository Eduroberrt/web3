{% extends 'base_dashboard.html' %}

{% block title %}Profile - Web3 Ledger Pro{% endblock %}

{% block content %}
<div class="min-h-screen bg-darkmode py-12 px-4">
    <div class="max-w-7xl mx-auto">
        <!-- Profile Header -->
        <div class="bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg p-4 md:p-6 mb-8">
            <div class="flex flex-col md:flex-row items-center md:items-center gap-4 md:space-x-6">
                <div class="w-16 h-16 md:w-20 md:h-20 bg-primary bg-opacity-20 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-8 h-8 md:w-10 md:h-10 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </div>
                <div class="flex-1 text-center md:text-left">
                    <h1 class="text-xl md:text-2xl font-bold text-white break-words">{{ user.username }}</h1>
                    <p class="text-muted text-sm md:text-base break-all">{{ user.email }}</p>
                </div>
                <div class="flex-shrink-0">
                    {% if user.kyc_verification.status == 'verified' %}
                        <span class="px-3 py-1.5 md:px-4 md:py-2 bg-success bg-opacity-20 text-success rounded-full text-xs md:text-sm font-semibold whitespace-nowrap">✓ Verified</span>
                    {% elif user.kyc_verification.status == 'pending' %}
                        <span class="px-3 py-1.5 md:px-4 md:py-2 bg-warning bg-opacity-20 text-warning rounded-full text-xs md:text-sm font-semibold whitespace-nowrap">⏳ Pending</span>
                    {% elif user.kyc_verification.status == 'rejected' %}
                        <span class="px-3 py-1.5 md:px-4 md:py-2 bg-error bg-opacity-20 text-error rounded-full text-xs md:text-sm font-semibold whitespace-nowrap">✗ Rejected</span>
                    {% else %}
                        <span class="px-3 py-1.5 md:px-4 md:py-2 bg-section bg-opacity-20 text-muted rounded-full text-xs md:text-sm font-semibold whitespace-nowrap">Not Verified</span>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Account Information -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-8">
            <div class="bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg p-4 md:p-6">
                <h3 class="text-base md:text-lg font-semibold text-white mb-3 md:mb-4">Account Details</h3>
                <div class="space-y-3 md:space-y-4">
                    <div>
                        <p class="text-xs md:text-sm text-muted">Username</p>
                        <p class="text-white font-medium text-sm md:text-base break-words">{{ user.username }}</p>
                    </div>
                    <div>
                        <p class="text-xs md:text-sm text-muted">Email Address</p>
                        <p class="text-white font-medium text-sm md:text-base break-all">{{ user.email }}</p>
                    </div>
                    <div>
                        <p class="text-xs md:text-sm text-muted">Member Since</p>
                        <p class="text-white font-medium text-sm md:text-base">{{ user.date_joined|date:"F d, Y" }}</p>
                    </div>
                </div>
            </div>

            <div class="bg-section bg-opacity-10 border border-section border-opacity-20 rounded-lg p-4 md:p-6">
                <h3 class="text-base md:text-lg font-semibold text-white mb-3 md:mb-4">KYC Status</h3>
                <div class="space-y-3 md:space-y-4">
                    <div>
                        <p class="text-xs md:text-sm text-muted">Verification Status</p>
                        <p class="text-white font-medium text-sm md:text-base">
                            {% if user.kyc_verification.status == 'verified' %}
                                Verified
                            {% elif user.kyc_verification.status == 'pending' %}
                                Under Review
                            {% elif user.kyc_verification.status == 'rejected' %}
                                Rejected
                            {% else %}
                                Not Submitted
                            {% endif %}
                        </p>
                    </div>
                    {% if user.kyc_verification.status == 'rejected' %}
                    <div>
                        <p class="text-xs md:text-sm text-muted">Rejection Reason</p>
                        <p class="text-error font-medium text-sm md:text-base break-words">{{ user.kyc_verification.rejection_reason|default:"Please resubmit your documents" }}</p>
                    </div>
                    {% endif %}
                    {% if user.kyc_verification.status != 'verified' %}
                    <a href="/verify/" class="inline-block px-3 py-1.5 md:px-4 md:py-2 bg-primary text-darkmode rounded-lg text-sm md:text-base font-semibold hover:bg-opacity-90 transition">
                        {% if user.kyc_verification.status == 'rejected' %}
                            Resubmit Verification
                        {% else %}
                            Complete Verification
                        {% endif %}
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
